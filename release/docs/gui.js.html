<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: gui.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: gui.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
const __GUIMANAGER_BG_NAME = "bg";
const __GUIMANAGER_TXT_NAME = "txt";

// Container consts
const __GUIMANAGER_CONTAINER_COLOR = "#a6a6a6cc";
const __GUIMANAGER_CONTAINER_WIDTH = 150;
const __GUIMANAGER_CONTAINER_HEIGHT = __GUIMANAGER_CONTAINER_WIDTH;

// Button consts
const __GUIMANAGER_BUTTON_WIDTH = 100;
const __GUIMANAGER_BUTTON_HEIGHT = 50;
const __GUIMANAGER_BUTTON_FONT_COLOR = "#000";
const __GUIMANAGER_BUTTON_FONT_SIZE = __GUIMANAGER_BUTTON_HEIGHT * 0.3;
const __GUIMANAGER_BUTTON_FONT =  __GUIMANAGER_BUTTON_FONT_SIZE + "px arial";

// Textbox consts
const __GUIMANAGER_TXTBOX_WIDTH = 100;
const __GUIMANAGER_TXTBOX_HEIGHT = 23;

/**
 * @class
 * @classdesc the graphical interface manager of the engine's game object.
 *
 * @param {Game} game   the JSCF game object.
 *
 * @constructor
 */
function GuiManager(game)
{
	this.eleNum = 0;

	// Set default bgcolor gradient
	var __GUIMANAGER_BUTTON_BGCOLOR = game.graphics.context.createLinearGradient(0, __GUIMANAGER_BUTTON_HEIGHT*0.4, 0, 0);
	__GUIMANAGER_BUTTON_BGCOLOR.addColorStop(0, "#bebebe");
	__GUIMANAGER_BUTTON_BGCOLOR.addColorStop(1, "#e7e7e7");

    /**
     *    creates rectangular container with background
     *
     *    @method
     *    @param  {String} name    container entity name
     *    @param  {Number} x       x position
     *    @param  {Number} y       y position
     *    @param  {Number} w       container width
     *    @param  {Number} h       container height
     *    @param  {String} bgcolor background color (2d context descriptor)
     *    @return {Entity}         gui container entity
     */
	this.createContainer = function(name, x, y, w, h, bgcolor)
	{
		var e = new Entity(game, name, true, x, y, true);
		// Build bg
		var bg = new Plane(game, w, h, bgcolor);
		bg.effect = shadowFx;
		e.addChild(__GUIMANAGER_BG_NAME, bg);
		return e;
	};

    /**
     *    creates default rectangular container
     *
     *    @method
     *    @param  {Number} x       x position
     *    @param  {Number} y       y position
     *    @return {Entity}         default gui container entity
     */
	this.createDefaultContainer = function(x, y)
	{
		return this.createContainer("con"+this.eleNum, x, y, __GUIMANAGER_CONTAINER_WIDTH, __GUIMANAGER_CONTAINER_HEIGHT, __GUIMANAGER_CONTAINER_COLOR);
	};

    /**
     *    creates rectangular button
     *
     *    @method
     *    @param  {String} name    button entity name
     *    @param  {Number} x        x position
     *    @param  {Number} y        y position
     *    @param  {Number} w        button width
     *    @param  {Number} h        button height
     *    @param  {String} bgcolor  background color (2d context descriptor)
     *    @param  {String} txt      the text to display on button
     *    @param  {String} txtstyle text 2d context styling (can be just color)
     *    @param  {String} font     2d cotext font description
     *    @return {Entity}          gui button entity
     */
	this.createButton = function(name, x, y, w, h, bgcolor, txt, txtstyle, font)
	{
		var e = this.createContainer(name, x, y, w, h, bgcolor);

		// Build txt
		var t = new Text(game, txt, txtstyle, font);
		var trect = t.getDimentions();
		var txtEntity = new Entity(game, name+"."+__GUIMANAGER_TXT_NAME, true, -trect.width/2, 0, true);
		txtEntity.addChild(__GUIMANAGER_TXT_NAME, t);

		// Add text entity
		e.addChild(__GUIMANAGER_TXT_NAME, txtEntity);

		// Add button handler component
		if (typeof(ButtonHandler) == "undefined") {
			console.warn("[JSCF][GuiManager] ButtonHandler component not loaded! Some functionality is disabled!");
		} else {
			e.addComponent(ButtonHandler);
		}

		return e;
	};

    /**
     *    creates default gui button
     *
     *    @method
     *    @param  {Number} x        x position
     *    @param  {Number} y        y position
     *    @param  {String} txt      the text to display on button
     *    @return {Entity}          default gui button entity
     */
	this.createDefaultButton = function(x, y, txt)
	{
		return this.createButton("btn"+this.eleNum++, x, y, __GUIMANAGER_BUTTON_WIDTH,
		 	__GUIMANAGER_BUTTON_HEIGHT, __GUIMANAGER_BUTTON_BGCOLOR, txt,
			__GUIMANAGER_BUTTON_FONT_COLOR,__GUIMANAGER_BUTTON_FONT);
	};

    /**
     *    creates gui rectangular textbox
     *
     *    @method
     *    @param  {String} name    textbox entity name
     *    @param  {Number} x        x position
     *    @param  {Number} y        y position
     *    @param  {Number} w        textbox width
     *    @param  {Number} h        textbox height
     *    @param  {String} bgcolor  background color (2d context descriptor)
     *    @param  {String} txt      the text to display on textbox
     *    @return {Entity}          gui textbox entity
     */
	this.createTextBox = function(name, x, y, w, h, txt)
	{
		var e = new Entity(game, name, true, x, y, true);
		e.insertChild(new Textbox(e, w, h, txt));

		return e;
	};

    /**
     *    creates default gui textbox
     *
     *    @method
     *    @param  {Number} x        x position
     *    @param  {Number} y        y position
     *    @return {Entity}          default gui textbox entity
     */
	this.createDefaultTextBox = function(x, y)
	{
		return this.createTextBox("tb"+this.eleNum, x, y, __GUIMANAGER_TXTBOX_WIDTH, __GUIMANAGER_TXTBOX_HEIGHT);
	};

    /**
     *    creates label (text gui entity)
     *
     *    @method
     *    @param  {Number} x        x position
     *    @param  {Number} y        y position
     *    @param  {String} txt      the text to display
     *    @return {Entity}          the gui label entity
     */
	this.createLabel = function(x, y, txt)
	{
		var text = new Text(game, txt, "white", "15px arial");
		text.enabled = true;
		var txtEntity = new Entity(game, "txt", true, x, y, true);
		txtEntity.insertChild(text);

		return txtEntity;
	};

    /**
     *    creates debug panel
     *
     *    @method
     *    @return {Entity} returns debug panel entity
     */
	this.createDebugPanel = function()
	{
		var panelHeight = game.getCanvasHeight();
		var panelWidth = game.getCanvasWidth()/4;
		var HORIZONTAL_OFFSET = panelWidth/4;
		var VERTICAL_OFFSET = -panelHeight/8;

		var panel = game.guiManager.createContainer("left-panel", panelWidth/2, panelHeight/2, panelWidth, panelHeight, __GUIMANAGER_CONTAINER_COLOR);
		game.getCurrentScene().addEntity(panel);

		// List label
 		var listLabel = this.createLabel(-HORIZONTAL_OFFSET, 0, "");
		panel.insertChild(listLabel);

		// build button
		var btn = game.guiManager.createDefaultButton(-HORIZONTAL_OFFSET, VERTICAL_OFFSET, "Toggle");
		btn.getComponentOfType(ButtonHandler).onClick = function() {
			var txt = listLabel.getChildAt(0);
			txt.enabled = !txt.enabled;
		}
		panel.insertChild(btn);

		// Entity creation
		var createBtn = game.guiManager.createDefaultButton(HORIZONTAL_OFFSET, VERTICAL_OFFSET, "Create Entity");
		createBtn.getComponentOfType(ButtonHandler).onClick = function() {
			game.getCurrentScene().createNewEntity(game.getCurrentScene().getEntityName(), 0, 0, null);
		}
		panel.insertChild(createBtn);

		// Search entity
		var textBox = game.guiManager.createDefaultTextBox(-HORIZONTAL_OFFSET/2, VERTICAL_OFFSET*2);
		var tb = textBox.getChildAt(0).textBox;
		tb.width(__GUIMANAGER_TXTBOX_WIDTH*2);
		tb.placeHolder("Search entity...");
		tb.onsubmit(function() {
			var ent = game.getCurrentScene().getEntity(tb.value());
			if (!ent) {
				tb.value("");
				return;
			}
			var pos = ent.transform.pos;
			transformTBx.getChildAt(0).textBox.value(pos.x);
			transformTBy.getChildAt(0).textBox.value(pos.y);
		});
		panel.insertChild(textBox);

		// Transform edit
		var transformTBx = game.guiManager.createDefaultTextBox(-HORIZONTAL_OFFSET, VERTICAL_OFFSET*2.5);
		transformTBx.getChildAt(0).textBox.placeHolder("pos.x");
		transformTBx.getChildAt(0).textBox.onsubmit(function()
		{
			var ent = game.getCurrentScene().getEntity(tb.value());
			if (!ent) {
				tb.value("");
				return;
			}
			ent.transform.pos.x = parseInt(transformTBx.getChildAt(0).textBox.value());
		});
		panel.insertChild(transformTBx);

		var transformTBy = game.guiManager.createDefaultTextBox(HORIZONTAL_OFFSET, VERTICAL_OFFSET*2.5);
		transformTBy.getChildAt(0).textBox.placeHolder("pos.y");
		transformTBy.getChildAt(0).textBox.onsubmit(function()
		{
			var ent = game.getCurrentScene().getEntity(tb.value());
			if (!ent) {
				tb.value("");
				return;
			}
			ent.transform.pos.y = parseInt(transformTBy.getChildAt(0).textBox.value());
		});
		panel.insertChild(transformTBy);

		// Transform label
		panel.insertChild(this.createLabel(0, VERTICAL_OFFSET*3, "Transform"));

		// Panel itself update
		var self = this;
		panel.insertChild({
			update: function()
			{
				var txt = listLabel.getChildAt(0);
				if (txt.enabled) {
					var entities = Object.keys(game.getCurrentScene().entities);
					var finalText = "";
					for (var i = 0; i &lt; entities.length; i++) {
						finalText += self.buildString(game.getCurrentScene().getEntity(entities[i])) + "\n";
					}
					txt.txt = finalText;
				} else {
					txt.txt = "";
				}
			}
		});

		return panel;
	};

    /**
     *    creates and inserts debug panel to current scene
     *
     *    @method
     */
	this.insertDebugPanel = function()
	{
		game.getCurrentScene().addEntity(this.createDebugPanel());
	};

    /**
     *    builds string description of an object
     *
     *    @method
     *    @param  {object} e an object (entity, component, other object...)
     *    @return {String}   a nice string representation
     */
	this.buildString = function(e)
	{
		const INDENT = "\t\t\t";
		var finalText = "";
		finalText += e.name + " (Entity)";

		for (var name in e.children) {
			if (!e.children.hasOwnProperty(name))
				continue;

			finalText += "\n" + INDENT;
			var c = e.children[name];

			if (c instanceof Entity) {
				finalText += this.buildString(c);
			} else if (c.constructor.component_name){
				finalText += INDENT + "- " + c.constructor.component_name + " (Component)";
			} else {
				finalText += INDENT + "- " + name + " (" + c.constructor.name + ")";
			}
		}
		return finalText;
	};

}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-CanvasInput.html">CanvasInput</a></li></ul><h3>Classes</h3><ul><li><a href="AABB.html">AABB</a></li><li><a href="Animation.html">Animation</a></li><li><a href="AnimFrame.html">AnimFrame</a></li><li><a href="AnimSprite.html">AnimSprite</a></li><li><a href="AssetManager.html">AssetManager</a></li><li><a href="CircleCollider.html">CircleCollider</a></li><li><a href="Component.html">Component</a></li><li><a href="Effect.html">Effect</a></li><li><a href="Entity.html">Entity</a></li><li><a href="Game.html">Game</a></li><li><a href="Graphics.html">Graphics</a></li><li><a href="GuiManager.html">GuiManager</a></li><li><a href="InputManager.html">InputManager</a></li><li><a href="Manifold.html">Manifold</a></li><li><a href="PhysicsEngine.html">PhysicsEngine</a></li><li><a href="Plane.html">Plane</a></li><li><a href="Point2d.html">Point2d</a></li><li><a href="ResourceManager.html">ResourceManager</a></li><li><a href="Scene.html">Scene</a></li><li><a href="SceneManager.html">SceneManager</a></li><li><a href="SoundPlayer.html">SoundPlayer</a></li><li><a href="Sprite.html">Sprite</a></li><li><a href="Text.html">Text</a></li><li><a href="Textbox.html">Textbox</a></li><li><a href="Transform.html">Transform</a></li><li><a href="Vector2d.html">Vector2d</a></li></ul><h3>Global</h3><ul><li><a href="global.html#__EPSILON">__EPSILON</a></li><li><a href="global.html#MathUtils">MathUtils</a></li><li><a href="global.html#SceneUtils">SceneUtils</a></li><li><a href="global.html#shadowFx">shadowFx</a></li><li><a href="global.html#Vector">Vector</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Jul 04 2018 20:48:14 GMT+0300 (שעון קיץ ירושלים)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
